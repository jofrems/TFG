{"ast":null,"code":"import _toConsumableArray from\"/Users/jeff/Desktop/TFG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/jeff/Desktop/TFG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{NEXT_PLAYER_CHANGED,NEXT_PLAYER_PUSHED}from\"./types\";var initialState={currentPlayerIndex:0,players:[]};export function multiplayerReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case NEXT_PLAYER_CHANGED:return reduceNextPlayerChanged(state,action);case NEXT_PLAYER_PUSHED:return reduceNextPlayerPushed(state,action);default:return state;}}function reduceNextPlayerChanged(state,action){return _objectSpread(_objectSpread({},state),{},{currentPlayerIndex:(state.currentPlayerIndex+1)%state.players.length});}function reduceNextPlayerPushed(state,action){var players=state.players;var newPlayers=_toConsumableArray(players);var isAlreadyPresent=players.some(function(p){return p.playerName===action.player.playerName;});if(!isAlreadyPresent){newPlayers.push(action.player);}return _objectSpread(_objectSpread({},state),{},{players:newPlayers,currentPlayerIndex:newPlayers.length-1});}","map":{"version":3,"sources":["/Users/jeff/Desktop/TFG/src/www/store/multiplayer/reducers.ts"],"names":["NEXT_PLAYER_CHANGED","NEXT_PLAYER_PUSHED","initialState","currentPlayerIndex","players","multiplayerReducer","state","action","type","reduceNextPlayerChanged","reduceNextPlayerPushed","length","newPlayers","isAlreadyPresent","some","p","playerName","player","push"],"mappings":"mSAAA,OAKEA,mBALF,CAMEC,kBANF,KAOO,SAPP,CASA,GAAMC,CAAAA,YAA8B,CAAG,CACrCC,kBAAkB,CAAE,CADiB,CAErCC,OAAO,CAAE,EAF4B,CAAvC,CAKA,MAAO,SAASC,CAAAA,kBAAT,EAGL,IAFAC,CAAAA,KAEA,2DAF0BJ,YAE1B,IADAK,CAAAA,MACA,2CACA,OAAQA,MAAM,CAACC,IAAf,EACE,IAAKR,CAAAA,mBAAL,CACE,MAAOS,CAAAA,uBAAuB,CAACH,KAAD,CAAQC,MAAR,CAA9B,CACF,IAAKN,CAAAA,kBAAL,CACE,MAAOS,CAAAA,sBAAsB,CAACJ,KAAD,CAAQC,MAAR,CAA7B,CACF,QACE,MAAOD,CAAAA,KAAP,CANJ,CAQD,CAED,QAASG,CAAAA,uBAAT,CACEH,KADF,CAEEC,MAFF,CAGE,CACA,sCACKD,KADL,MAEEH,kBAAkB,CAAE,CAACG,KAAK,CAACH,kBAAN,CAA2B,CAA5B,EAAiCG,KAAK,CAACF,OAAN,CAAcO,MAFrE,GAID,CAED,QAASD,CAAAA,sBAAT,CACEJ,KADF,CAEEC,MAFF,CAGE,IACQH,CAAAA,OADR,CACoBE,KADpB,CACQF,OADR,CAGA,GAAMQ,CAAAA,UAAU,oBAAOR,OAAP,CAAhB,CACA,GAAMS,CAAAA,gBAAgB,CAAGT,OAAO,CAACU,IAAR,CACvB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,UAAF,GAAiBT,MAAM,CAACU,MAAP,CAAcD,UAAtC,EADuB,CAAzB,CAGA,GAAI,CAACH,gBAAL,CAAuB,CACrBD,UAAU,CAACM,IAAX,CAAgBX,MAAM,CAACU,MAAvB,EACD,CAED,sCACKX,KADL,MAEEF,OAAO,CAAEQ,UAFX,CAGET,kBAAkB,CAAES,UAAU,CAACD,MAAX,CAAoB,CAH1C,GAKD","sourcesContent":["import {\n  MultiplayerActionTypes,\n  MultiplayerState,\n  NextPlayerChangedAction,\n  NextPlayerPushedAction,\n  NEXT_PLAYER_CHANGED,\n  NEXT_PLAYER_PUSHED,\n} from \"./types\";\n\nconst initialState: MultiplayerState = {\n  currentPlayerIndex: 0,\n  players: [],\n};\n\nexport function multiplayerReducer(\n  state: MultiplayerState = initialState,\n  action: MultiplayerActionTypes\n) {\n  switch (action.type) {\n    case NEXT_PLAYER_CHANGED:\n      return reduceNextPlayerChanged(state, action);\n    case NEXT_PLAYER_PUSHED:\n      return reduceNextPlayerPushed(state, action);\n    default:\n      return state;\n  }\n}\n\nfunction reduceNextPlayerChanged(\n  state: MultiplayerState,\n  action: NextPlayerChangedAction\n) {\n  return {\n    ...state,\n    currentPlayerIndex: (state.currentPlayerIndex + 1) % state.players.length,\n  };\n}\n\nfunction reduceNextPlayerPushed(\n  state: MultiplayerState,\n  action: NextPlayerPushedAction\n) {\n  const { players } = state;\n\n  const newPlayers = [...players];\n  const isAlreadyPresent = players.some(\n    (p) => p.playerName === action.player.playerName\n  );\n  if (!isAlreadyPresent) {\n    newPlayers.push(action.player);\n  }\n\n  return {\n    ...state,\n    players: newPlayers,\n    currentPlayerIndex: newPlayers.length - 1,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}