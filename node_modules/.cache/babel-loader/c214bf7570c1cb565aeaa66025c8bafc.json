{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jeff/Desktop/TFG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jeff/Desktop/TFG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{gamePost}from\"www/store/game/gamePost\";import{TRADE}from\"./types\";export var componentTradeMiddleware=function componentTradeMiddleware(store){return function(next){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(action){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:next(action);//console.log(\"form: \"+action.form.getResources);\nif(!(action.type===TRADE)){_context.next=4;break;}_context.next=4;return orderTrade(store,action,\"trade\");case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};};function orderTrade(_x2,_x3,_x4){return _orderTrade.apply(this,arguments);}function _orderTrade(){_orderTrade=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(store,action,order){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return gamePost(store,\"/api/v1/resources/\".concat(action.entityId,\"/\").concat(order),action.form);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _orderTrade.apply(this,arguments);}","map":{"version":3,"sources":["/Users/jeff/Desktop/TFG/src/www/components/tradeComponent/middleware.ts"],"names":["gamePost","TRADE","componentTradeMiddleware","store","next","action","type","orderTrade","order","entityId","form"],"mappings":"yRAEA,OAASA,QAAT,KAAyB,yBAAzB,CACA,OAAoCC,KAApC,KAA8D,SAA9D,CAEA,MAAO,IAAMC,CAAAA,wBAAkD,CAC7D,QADWA,CAAAA,wBACX,CAACC,KAAD,QAAgB,UAACC,IAAD,iGAAU,iBAAOC,MAAP,kHACxBD,IAAI,CAACC,MAAD,CAAJ,CACA;AAFwB,KAGpBA,MAAM,CAACC,IAAP,GAAgBL,KAHI,gDAIhBM,CAAAA,UAAU,CAACJ,KAAD,CAAQE,MAAR,CAAgB,OAAhB,CAJM,uDAAV,gEAAhB,EADK,C,QASUE,CAAAA,U,mJAAf,kBACEJ,KADF,CAEEE,MAFF,CAGEG,KAHF,6IAKQR,CAAAA,QAAQ,CACZG,KADY,6BAESE,MAAM,CAACI,QAFhB,aAE4BD,KAF5B,EAGZH,MAAM,CAACK,IAHK,CALhB,yD","sourcesContent":["import { Middleware } from \"redux\";\nimport { AppState } from \"www/store\";\nimport { gamePost } from \"www/store/game/gamePost\";\nimport { ComponentTradeActionTypes, TRADE, TradeAction } from \"./types\";\n\nexport const componentTradeMiddleware: Middleware<{}, AppState> =\n  (store: any) => (next) => async (action: ComponentTradeActionTypes) => {\n    next(action);\n    //console.log(\"form: \"+action.form.getResources);\n    if (action.type === TRADE) {\n      await orderTrade(store, action, \"trade\");\n    }\n  };\n\n  async function orderTrade(\n    store: any,\n    action: TradeAction,\n    order: string\n  ) {\n    await gamePost(\n      store,\n      `/api/v1/resources/${action.entityId}/${order}`,\n      action.form\n    );\n  }\n"]},"metadata":{},"sourceType":"module"}