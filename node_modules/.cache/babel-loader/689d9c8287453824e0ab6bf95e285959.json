{"ast":null,"code":"import { messageShown } from \"./actions\";\nexport async function fetchAndDispatchMessage(url, options, dispatch) {\n  const newOptions = { ...options,\n    body: JSON.stringify(options === null || options === void 0 ? void 0 : options.body),\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n  const response = await fetch(url, newOptions);\n  const body = await response.json();\n\n  if (typeof body.message === \"string\") {\n    dispatch(messageShown(body.message, body.isError));\n  }\n\n  return body;\n}","map":{"version":3,"sources":["/Users/jeff/Desktop/TFG_Catan/src/www/widgets/MessageWidget/fetchAndDispatchMessage.ts"],"names":["messageShown","fetchAndDispatchMessage","url","options","dispatch","newOptions","body","JSON","stringify","headers","response","fetch","json","message","isError"],"mappings":"AACA,SAASA,YAAT,QAA6B,WAA7B;AAEA,OAAO,eAAeC,uBAAf,CACLC,GADK,EAELC,OAFK,EAGLC,QAHK,EAIS;AACd,QAAMC,UAAU,GAAG,EACjB,GAAGF,OADc;AAEjBG,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeL,OAAf,aAAeA,OAAf,uBAAeA,OAAO,CAAEG,IAAxB,CAFW;AAGjBG,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB;AAHQ,GAAnB;AAKA,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACT,GAAD,EAAMG,UAAN,CAA5B;AAEA,QAAMC,IAAI,GAAG,MAAMI,QAAQ,CAACE,IAAT,EAAnB;;AACA,MAAI,OAAON,IAAI,CAACO,OAAZ,KAAwB,QAA5B,EAAsC;AACpCT,IAAAA,QAAQ,CAACJ,YAAY,CAACM,IAAI,CAACO,OAAN,EAAeP,IAAI,CAACQ,OAApB,CAAb,CAAR;AACD;;AAED,SAAOR,IAAP;AACD","sourcesContent":["import { AppDispatch } from \"www/store\";\nimport { messageShown } from \"./actions\";\n\nexport async function fetchAndDispatchMessage(\n  url: Parameters<typeof fetch>[0],\n  options: Parameters<typeof fetch>[1],\n  dispatch: AppDispatch\n): Promise<any> {\n  const newOptions = {\n    ...options,\n    body: JSON.stringify(options?.body),\n    headers: { \"Content-Type\": \"application/json\" },\n  };\n  const response = await fetch(url, newOptions);\n\n  const body = await response.json();\n  if (typeof body.message === \"string\") {\n    dispatch(messageShown(body.message, body.isError));\n  }\n\n  return body;\n}\n"]},"metadata":{},"sourceType":"module"}