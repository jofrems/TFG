{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jeff/Desktop/TFG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jeff/Desktop/TFG/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{loadingFinished,loadingStarted}from\"www/widgets/LoadingWidget/actions\";import{screenPushed}from\"www/widgets/ScreenStackWidget/actions\";import{blogReplaced}from\"./actions\";import{BLOG_PUSHED}from\"./types\";export var blogMiddleware=function blogMiddleware(store){return function(next){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(action){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:next(action);if(!(action.type===BLOG_PUSHED)){_context.next=4;break;}_context.next=4;return blogPushed(store);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};};function blogPushed(_x2){return _blogPushed.apply(this,arguments);}function _blogPushed(){_blogPushed=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(store){var response,blog;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:store.dispatch(loadingStarted());_context2.next=3;return fetch(\"/api/v1/posts\");case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:blog=_context2.sent;store.dispatch(blogReplaced(blog.posts));store.dispatch(screenPushed(\"blog\"));store.dispatch(loadingFinished());case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _blogPushed.apply(this,arguments);}","map":{"version":3,"sources":["/Users/jeff/Desktop/TFG/src/www/screens/BlogScreen/middleware.ts"],"names":["loadingFinished","loadingStarted","screenPushed","blogReplaced","BLOG_PUSHED","blogMiddleware","store","next","action","type","blogPushed","dispatch","fetch","response","json","blog","posts"],"mappings":"yRAEA,OACEA,eADF,CAEEC,cAFF,KAGO,mCAHP,CAIA,OAASC,YAAT,KAA6B,uCAA7B,CACA,OAASC,YAAT,KAA6B,WAA7B,CACA,OAASC,WAAT,KAA4B,SAA5B,CAEA,MAAO,IAAMC,CAAAA,cAAwC,CACnD,QADWA,CAAAA,cACX,CAACC,KAAD,QAAgB,UAACC,IAAD,iGAAU,iBAAOC,MAAP,kHACxBD,IAAI,CAACC,MAAD,CAAJ,CADwB,KAGpBA,MAAM,CAACC,IAAP,GAAgBL,WAHI,gDAGeM,CAAAA,UAAU,CAACJ,KAAD,CAHzB,uDAAV,gEAAhB,EADK,C,QAOQI,CAAAA,U,2IAAf,kBAA0BJ,KAA1B,wIACEA,KAAK,CAACK,QAAN,CAAeV,cAAc,EAA7B,EADF,uBAGyBW,CAAAA,KAAK,CAAC,eAAD,CAH9B,QAGQC,QAHR,uCAIqBA,CAAAA,QAAQ,CAACC,IAAT,EAJrB,QAIQC,IAJR,gBAKET,KAAK,CAACK,QAAN,CAAeR,YAAY,CAACY,IAAI,CAACC,KAAN,CAA3B,EACAV,KAAK,CAACK,QAAN,CAAeT,YAAY,CAAC,MAAD,CAA3B,EAEAI,KAAK,CAACK,QAAN,CAAeX,eAAe,EAA9B,EARF,yD","sourcesContent":["import { Middleware } from \"redux\";\nimport { AppState } from \"www/store\";\nimport {\n  loadingFinished,\n  loadingStarted,\n} from \"www/widgets/LoadingWidget/actions\";\nimport { screenPushed } from \"www/widgets/ScreenStackWidget/actions\";\nimport { blogReplaced } from \"./actions\";\nimport { BLOG_PUSHED } from \"./types\";\n\nexport const blogMiddleware: Middleware<{}, AppState> =\n  (store: any) => (next) => async (action) => {\n    next(action);\n\n    if (action.type === BLOG_PUSHED) await blogPushed(store);\n  };\n\nasync function blogPushed(store: any) {\n  store.dispatch(loadingStarted());\n\n  const response = await fetch(\"/api/v1/posts\");\n  const blog = await response.json();\n  store.dispatch(blogReplaced(blog.posts));\n  store.dispatch(screenPushed(\"blog\"));\n\n  store.dispatch(loadingFinished());\n}\n"]},"metadata":{},"sourceType":"module"}